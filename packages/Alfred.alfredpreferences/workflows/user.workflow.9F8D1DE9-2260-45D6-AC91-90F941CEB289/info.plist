<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>bundleid</key>
	<string>com.vitorgalvao.alfred.calmnotifications</string>
	<key>connections</key>
	<dict>
		<key>3E435725-836B-4634-BF9F-B8DBADDDEABF</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>4C30FC65-71BF-4EFE-94CC-B038B4D991CA</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>CCD42A98-2018-4BC4-9B3A-90AA2B0AEB3A</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>4C30FC65-71BF-4EFE-94CC-B038B4D991CA</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
	</dict>
	<key>createdby</key>
	<string>Vítor Galvão</string>
	<key>description</key>
	<string>Toggle Do Not Disturb</string>
	<key>disabled</key>
	<false/>
	<key>name</key>
	<string>CalmNotifications</string>
	<key>objects</key>
	<array>
		<dict>
			<key>config</key>
			<dict>
				<key>triggerid</key>
				<string>dnd</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.trigger.external</string>
			<key>uid</key>
			<string>CCD42A98-2018-4BC4-9B3A-90AA2B0AEB3A</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>alfredfiltersresults</key>
				<false/>
				<key>alfredfiltersresultsmatchmode</key>
				<integer>0</integer>
				<key>argumenttreatemptyqueryasnil</key>
				<false/>
				<key>argumenttrimmode</key>
				<integer>0</integer>
				<key>argumenttype</key>
				<integer>2</integer>
				<key>escaping</key>
				<integer>0</integer>
				<key>keyword</key>
				<string>dnd</string>
				<key>queuedelaycustom</key>
				<integer>1</integer>
				<key>queuedelayimmediatelyinitially</key>
				<false/>
				<key>queuedelaymode</key>
				<integer>0</integer>
				<key>queuemode</key>
				<integer>1</integer>
				<key>runningsubtext</key>
				<string>Getting status…</string>
				<key>script</key>
				<string>require 'json'
require 'open3'

script_filter_items = []

dnd_active = Open3.capture2('defaults', '-currentHost', 'read', "#{ENV['HOME']}/Library/Preferences/ByHost/com.apple.notificationcenterui", 'doNotDisturb').first.strip == '0' ? false : true

if dnd_active
  script_filter_items.push(
    title: 'Turn it off',
    subtitle: 'Allow notifications again',
    arg: 'off',
    icon: { path: 'icon_alt.png' }
  )
else
  script_filter_items.push(
    title: 'Turn it on',
    subtitle: 'Stop notifications from going through until tomorrow',
    arg: 'on'
  )
end

puts({ items: script_filter_items }.to_json)</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>subtext</key>
				<string>Toggle Do Not Disturb</string>
				<key>title</key>
				<string>CalmNotifications</string>
				<key>type</key>
				<integer>2</integer>
				<key>withspace</key>
				<false/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.scriptfilter</string>
			<key>uid</key>
			<string>3E435725-836B-4634-BF9F-B8DBADDDEABF</string>
			<key>version</key>
			<integer>3</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>0</integer>
				<key>script</key>
				<string>action="${1}"

if [[ "${action}" == 'on' ]]; then
  defaults -currentHost write "${HOME}/Library/Preferences/ByHost/com.apple.notificationcenterui" doNotDisturb -boolean true
  defaults -currentHost write "${HOME}/Library/Preferences/ByHost/com.apple.notificationcenterui" doNotDisturbDate -date "$(date -u +'%Y-%m-%d %H:%M:%S +0000')"
  killall NotificationCenter
else
  defaults -currentHost write "${HOME}/Library/Preferences/ByHost/com.apple.notificationcenterui" doNotDisturb -boolean false
  killall NotificationCenter
fi</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>0</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>4C30FC65-71BF-4EFE-94CC-B038B4D991CA</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
	</array>
	<key>readme</key>
	<string>Call `dnd` to toggle Do Not Disturb.

![](https://i.imgur.com/wbWvItv.png)
![](https://i.imgur.com/uFToKeR.png)</string>
	<key>uidata</key>
	<dict>
		<key>3E435725-836B-4634-BF9F-B8DBADDDEABF</key>
		<dict>
			<key>xpos</key>
			<integer>40</integer>
			<key>ypos</key>
			<integer>150</integer>
		</dict>
		<key>4C30FC65-71BF-4EFE-94CC-B038B4D991CA</key>
		<dict>
			<key>xpos</key>
			<integer>250</integer>
			<key>ypos</key>
			<integer>150</integer>
		</dict>
		<key>CCD42A98-2018-4BC4-9B3A-90AA2B0AEB3A</key>
		<dict>
			<key>xpos</key>
			<integer>40</integer>
			<key>ypos</key>
			<integer>30</integer>
		</dict>
	</dict>
	<key>version</key>
	<string>20.1</string>
	<key>webaddress</key>
	<string>https://vitorgalvao.com/</string>
</dict>
</plist>
